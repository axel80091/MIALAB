<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<link href="./resources/css/index.css" rel="stylesheet" type="text/css" />
</h:head>
<body>
	<h:form>
		<p:growl id="growl" showDetail="true" sticky="true" />
		<div class="centerDiv" style="width: 400px">
			<p:panel>
				<!-- encabezado -->
				<f:facet name="header">INGRESO AL SISTEMA</f:facet>
				<!-- sistema de grillas lo podemos ver en primefaces -->
				<h:panelGrid columns="2">
					<p:outputLabel for="txtLogin" value="Usuario:" />
					<h:inputText id="txtLogin" required="true"
						value="#{indexBean.us.usuario}" />

					<p:outputLabel for="txtContrasena" value="Contrase単a:" />
					<h:inputSecret id="txtContrasena" required="true"
						value="#{indexBean.us.clave}" />
				</h:panelGrid>
				<h:panelGrid columns="4">
					<p:commandButton value="Login" action="#{indexBean.login()}"
						update="@form" />
					<!-- inmediate no hagas caso a nada hace una navegacion con redireccion forzada -->
					<p:commandButton value="Atras"
						actionListener="inicio?faces-redirect=true"
						action="inicio?faces-redirect=true" immediate="true" />
				</h:panelGrid>


				<p:commandLink value="Recuperar Contrase単a"
					oncomplete="PF('wdlg').show();" />

				<p:dialog id="dlg" header="Recuperar Contrase単a" widgetVar="wdlg"
					modal="true" closeOnEscape="true" resizable="false"
					draggable="true">
					<h:panelGrid columns="2">
						<p:outputLabel for="txtEmail" value="Ingrese el email registrado:" />
						<p:inputText id="txtEmail" value="#{indexBean.emailRecuperaion}"/>
						<p:message for="txtEmail" display="text" />
						<h:column />
					</h:panelGrid>

					<p:commandButton value="Recuperar"
						actionListener="#{indexBean.recuperarContrase単a()}"
						oncomplete="if(args &amp;&amp; !args.validationFailed) PF('wdlg').hide()"
						ajax="true" />

				</p:dialog>
			</p:panel>
		</div>
	</h:form>
</body>
</html>
